#!/bin/bash
isl_bucket=$1
crid=$2

# get uppercased CRID
CRID=${crid^^}

# adjust CRID/crid for INT or OPS if needed
if [ "$crid" != "d00200" ]; then
  sed -i "s/d00200/$crid/g" ~/mozart/ops/opera-pcm/tests/network-state-config/*/*
  sed -i "s/D00200/$CRID/g" ~/mozart/ops/opera-pcm/tests/network-state-config/*/*
fi

aws s3 cp ~/mozart/ops/opera-pcm/tests/network-state-config/NISAR_L1_PR_RSLC_012_016_D_067_4020_VV_20220122T083531_20220122T083606_D00200_P_F_001/NISAR_L1_PR_RSLC_012_016_D_067_4020_VV_20220122T083531_20220122T083606_D00200_P_F_001.h5 s3://${isl_bucket}/met_required/NISAR_L1_PR_RSLC_012_016_D_067_4020_VV_20220122T083531_20220122T083606_${CRID}_P_F_001.h5
aws s3 cp ~/mozart/ops/opera-pcm/tests/network-state-config/NISAR_L1_PR_RSLC_012_016_D_067_4020_VV_20220122T083531_20220122T083606_D00200_P_F_001/NISAR_L1_PR_RSLC_012_016_D_067_4020_VV_20220122T083531_20220122T083606_D00200_P_F_001.h5.met.json s3://${isl_bucket}/met_required/NISAR_L1_PR_RSLC_012_016_D_067_4020_VV_20220122T083531_20220122T083606_${CRID}_P_F_001.h5.met.json
aws s3 cp ~/mozart/ops/opera-pcm/tests/network-state-config/NISAR_L1_PR_RSLC_012_016_D_067_4020_VV_20220122T083531_20220122T083606_D00200_P_F_001/NISAR_L1_PR_RSLC_012_016_D_067_4020_VV_20220122T083531_20220122T083606_D00200_P_F_001.h5.signal s3://${isl_bucket}/met_required/NISAR_L1_PR_RSLC_012_016_D_067_4020_VV_20220122T083531_20220122T083606_${CRID}_P_F_001.h5.signal

aws s3 cp ~/mozart/ops/opera-pcm/tests/network-state-config/NISAR_L1_PR_RSLC_013_016_D_067_4020_VV_20220205T083531_20220205T083606_D00200_P_F_001/NISAR_L1_PR_RSLC_013_016_D_067_4020_VV_20220205T083531_20220205T083606_D00200_P_F_001.h5 s3://${isl_bucket}/met_required/NISAR_L1_PR_RSLC_013_016_D_067_4020_VV_20220205T083531_20220205T083606_${CRID}_P_F_001.h5
aws s3 cp ~/mozart/ops/opera-pcm/tests/network-state-config/NISAR_L1_PR_RSLC_013_016_D_067_4020_VV_20220205T083531_20220205T083606_D00200_P_F_001/NISAR_L1_PR_RSLC_013_016_D_067_4020_VV_20220205T083531_20220205T083606_D00200_P_F_001.h5.met.json s3://${isl_bucket}/met_required/NISAR_L1_PR_RSLC_013_016_D_067_4020_VV_20220205T083531_20220205T083606_${CRID}_P_F_001.h5.met.json
aws s3 cp ~/mozart/ops/opera-pcm/tests/network-state-config/NISAR_L1_PR_RSLC_013_016_D_067_4020_VV_20220205T083531_20220205T083606_D00200_P_F_001/NISAR_L1_PR_RSLC_013_016_D_067_4020_VV_20220205T083531_20220205T083606_D00200_P_F_001.h5.signal s3://${isl_bucket}/met_required/NISAR_L1_PR_RSLC_013_016_D_067_4020_VV_20220205T083531_20220205T083606_${CRID}_P_F_001.h5.signal

